本文主要记录在虚拟机ubuntu20上安装qemu，调试linux内核

环境搭建
1. ubuntu20可从ubuntu官网上下载镜像，VMware上运行起来。
2.ubuntu20上安装qemu比较方便，直接apt-get即可
apt-get install qemu-systerm
查看安装情况：qemu-system-arm --version
3.下载要调试的内核，对应版本的链接可从https://www.kernel.org/官网获取到
wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.181.tar.xz
4.安装要使用的交叉编译工具链
apt-get install gcc-10-aarch64-linux-gnu
为便于使用，修改名称mv /usr/bin/aarch64-linux-gnu-gcc-10 /usr/bin/aarch64-linux-gnu-gcc
aarch64-linux-gnu-gcc --version可以查看版本
5.配置及编译内核
导出环境变量
export ARCH=arm64
export CROSS_COPILE=aarch64-linux-gnu-
使用make defconfig生成.config
使用make menuconfig配置内核
最后make -j8编译即可
6.编译rootfs
获取wget https://busybox.net/downloads/busybox-1.36.0.tar.bz2
tar xf busybox-1.36.0.tar.bz2
跟内核配置编译一样
make deconfig
make menuconfig 需要将busybox配置为静态编译
1 Settings  --->
2 [*] Build BusyBox as a static binary (no shared libs)
make install
最终生成_install目录，里面就是初步的rootfs















参考：
https://zhuanlan.zhihu.com/p/499637419
